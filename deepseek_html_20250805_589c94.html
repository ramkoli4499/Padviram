<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Padviram Employee Services - AI Career Platform</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Open+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* All previous CSS styles */
    .ai-tool-container {
      background: white;
      border-radius: 10px;
      padding: 25px;
      margin: 25px 0;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .chat-interface {
      height: 400px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      overflow-y: auto;
      padding: 15px;
      margin-bottom: 15px;
      background: #f9f9f9;
    }
    .message {
      margin: 10px 0;
      padding: 12px 18px;
      border-radius: 20px;
      max-width: 80%;
      line-height: 1.5;
    }
    .user-message {
      background: #1B2A49;
      color: white;
      margin-left: auto;
      border-bottom-right-radius: 5px;
    }
    .ai-message {
      background: #f0f0f0;
      margin-right: auto;
      border-bottom-left-radius: 5px;
    }
    .video-container {
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
      position: relative;
    }
    #userVideo {
      width: 100%;
      background: #333;
      border-radius: 8px;
    }
    .interview-controls {
      margin: 25px 0;
      text-align: center;
    }
    .analysis-result {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin-top: 25px;
      border-left: 4px solid #1B2A49;
    }
    .progress-container {
      width: 100%;
      background: #e0e0e0;
      border-radius: 5px;
      margin: 15px 0;
    }
    .progress-bar {
      height: 10px;
      background: #1B2A49;
      border-radius: 5px;
      width: 0%;
      transition: width 0.3s;
    }
    @media (max-width: 768px) {
      .message {
        max-width: 90%;
      }
      .ai-tool-container {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <!-- Header with Language Switcher -->
  <div class="lang-switch">
    <label for="langSelect">Language:</label>
    <select id="langSelect" onchange="switchLanguage()">
      <option value="en">English</option>
      <option value="mr">मराठी</option>
      <option value="hi">हिन्दी</option>
      <option value="kn">ಕನ್ನಡ</option>
    </select>
  </div>

  <header>
    <h1>Padviram Employee Services</h1>
    <nav>
      <a href="#about">About</a>
      <a href="#services">Services</a>
      <a href="#ai-tools">AI Tools</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <section class="hero">
    <video class="hero-video" autoplay muted loop>
      <source src="career-video.mp4" type="video/mp4">
    </video>
    <div class="hero-content">
      <h1>AI-Powered Career Development Platform</h1>
      <p>Your complete solution for job search and career growth</p>
      <button class="btn" onclick="scrollToAI()">Try Our AI Tools</button>
    </div>
  </section>

  <!-- AI Tools Section -->
  <section id="ai-tools" class="section">
    <h2>AI Career Tools</h2>
    
    <!-- Resume Analyzer -->
    <div class="ai-tool-container">
      <h3><i class="fas fa-file-alt"></i> AI Resume Analyzer</h3>
      <div class="resume-upload">
        <input type="file" id="resumeFile" accept=".pdf,.doc,.docx">
        <button class="btn" onclick="analyzeResume()">
          <span id="analyzeText">Analyze Resume</span>
          <span id="analyzeSpinner" style="display:none;">
            <i class="fas fa-spinner fa-spin"></i> Analyzing...
          </span>
        </button>
        <div class="progress-container">
          <div class="progress-bar" id="resumeProgress"></div>
        </div>
        <div id="resumeAnalysisResult" class="analysis-result" style="display:none;"></div>
      </div>
    </div>
    
    <!-- Career Assistant -->
    <div class="ai-tool-container">
      <h3><i class="fas fa-robot"></i> Career Assistant</h3>
      <div class="chat-interface" id="chatContainer">
        <div class="ai-message">Hello! I'm your AI career assistant. How can I help you with your job search or career development today?</div>
      </div>
      <div class="input-area">
        <input type="text" id="userInput" placeholder="Ask about careers, jobs, skills..." 
               onkeypress="if(event.key === 'Enter') sendMessage()">
        <button class="btn" onclick="sendMessage()">Send</button>
      </div>
    </div>
    
    <!-- Interview Coach -->
    <div class="ai-tool-container">
      <h3><i class="fas fa-video"></i> Interview Coach</h3>
      <div class="video-container">
        <video id="userVideo" autoplay muted></video>
      </div>
      <div class="interview-controls">
        <button class="btn" id="startInterviewBtn" onclick="startInterview()">
          Start Practice Interview
        </button>
        <button class="btn" id="stopInterviewBtn" onclick="stopInterview()" style="display:none;">
          Stop & Get Feedback
        </button>
      </div>
      <div id="interviewFeedback" class="analysis-result" style="display:none;"></div>
    </div>
  </section>

  <!-- Other sections (About, Services, Contact) -->

  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const storage = firebase.storage();

    // Scroll to AI Tools
    function scrollToAI() {
      document.getElementById('ai-tools').scrollIntoView({ behavior: 'smooth' });
    }

    // Language Switcher
    function switchLanguage() {
      const lang = document.getElementById('langSelect').value;
      // Implementation would update all text elements based on selected language
      console.log('Language switched to:', lang);
    }

    // Resume Analyzer
    async function analyzeResume() {
      const fileInput = document.getElementById('resumeFile');
      const analyzeBtn = document.getElementById('analyzeText');
      const analyzeSpinner = document.getElementById('analyzeSpinner');
      const progressBar = document.getElementById('resumeProgress');
      const resultDiv = document.getElementById('resumeAnalysisResult');
      
      if (!fileInput.files[0]) {
        alert('Please select a resume file first');
        return;
      }

      // Show loading state
      analyzeBtn.style.display = 'none';
      analyzeSpinner.style.display = 'inline';
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = '<p>Processing your resume...</p>';
      
      // Simulate upload progress
      let progress = 0;
      const progressInterval = setInterval(() => {
        progress += 5;
        progressBar.style.width = `${progress}%`;
        if (progress >= 100) clearInterval(progressInterval);
      }, 200);

      try {
        // In a real implementation, you would:
        // 1. Upload to Firebase Storage
        // 2. Extract text from the resume
        // 3. Send to your backend for AI analysis
        
        // Simulated response after 3 seconds
        setTimeout(() => {
          clearInterval(progressInterval);
          progressBar.style.width = '100%';
          
          const analysisResult = `
            <h4>Resume Analysis Complete</h4>
            <p><strong>Overall Score:</strong> 82/100</p>
            
            <h5>Strengths:</h5>
            <ul>
              <li>Clear and professional format</li>
              <li>Good technical skills section</li>
              <li>Relevant work experience highlighted</li>
            </ul>
            
            <h5>Areas for Improvement:</h5>
            <ul>
              <li>Add more quantifiable achievements</li>
              <li>Include projects section with descriptions</li>
              <li>Tailor skills to specific job requirements</li>
            </ul>
            
            <button class="btn" onclick="generateImprovedResume()">
              Generate Improved Resume
            </button>
          `;
          
          resultDiv.innerHTML = analysisResult;
          analyzeBtn.style.display = 'inline';
          analyzeSpinner.style.display = 'none';
        }, 3000);
        
      } catch (error) {
        console.error('Error analyzing resume:', error);
        resultDiv.innerHTML = '<p>Error analyzing resume. Please try again.</p>';
        analyzeBtn.style.display = 'inline';
        analyzeSpinner.style.display = 'none';
        clearInterval(progressInterval);
      }
    }

    // Career Assistant Chat
    async function sendMessage() {
      const input = document.getElementById('userInput');
      const message = input.value.trim();
      if (!message) return;

      const chatContainer = document.getElementById('chatContainer');
      
      // Add user message
      chatContainer.innerHTML += `<div class="message user-message">${message}</div>`;
      input.value = '';
      chatContainer.scrollTop = chatContainer.scrollHeight;
      
      // Show typing indicator
      chatContainer.innerHTML += `<div class="message ai-message" id="typingIndicator">
        <i class="fas fa-ellipsis-h"></i>
      </div>`;
      chatContainer.scrollTop = chatContainer.scrollHeight;
      
      try {
        // In a real implementation, you would call your backend API
        // that connects to an AI service like OpenAI
        
        // Simulated response after 1-2 seconds
        setTimeout(() => {
          document.getElementById('typingIndicator').remove();
          
          // Sample responses based on user input
          let response;
          if (message.toLowerCase().includes('job search')) {
            response = `For effective job searching:
              1. Optimize your LinkedIn profile
              2. Network with professionals in your field
              3. Apply to 5-10 relevant jobs weekly
              4. Follow up after applications`;
          } 
          else if (message.toLowerCase().includes('interview')) {
            response = `Common interview questions to prepare:
              1. "Tell me about yourself" (2-min pitch)
              2. "Why do you want this job?"
              3. "What are your strengths/weaknesses?"
              Practice with our Interview Coach above!`;
          }
          else {
            response = `I can help with:
              - Resume improvement tips
              - Job search strategies
              - Interview preparation
              - Career path guidance
              Ask me anything about your career!`;
          }
          
          chatContainer.innerHTML += `<div class="message ai-message">${response}</div>`;
          chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 1000 + Math.random() * 1000);
        
      } catch (error) {
        console.error('Chat error:', error);
        document.getElementById('typingIndicator').remove();
        chatContainer.innerHTML += `<div class="message ai-message">
          Sorry, I encountered an error. Please try again.
        </div>`;
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }
    }

    // Interview Coach
    let mediaRecorder;
    let recordedChunks = [];
    let currentQuestion = null;

    async function startInterview() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ 
          video: true, 
          audio: true 
        });
        
        const videoElement = document.getElementById('userVideo');
        videoElement.srcObject = stream;
        
        // Setup media recorder
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.ondataavailable = (event) => {
          if (event.data.size > 0) {
            recordedChunks.push(event.data);
          }
        };
        mediaRecorder.start(1000); // Collect data every second
        
        // Update UI
        document.getElementById('startInterviewBtn').style.display = 'none';
        document.getElementById('stopInterviewBtn').style.display = 'inline-block';
        
        // Display a question
        const questions = [
          {
            text: "Tell me about yourself",
            tips: "Focus on your professional background, skills, and what makes you unique."
          },
          {
            text: "Why do you want to work for our company?",
            tips: "Show you've researched the company and align with their values/mission."
          }
        ];
        
        currentQuestion = questions[Math.floor(Math.random() * questions.length)];
        
        const feedbackDiv = document.getElementById('interviewFeedback');
        feedbackDiv.style.display = 'block';
        feedbackDiv.innerHTML = `
          <h4>Interview Question:</h4>
          <p>"${currentQuestion.text}"</p>
          <p><i>${currentQuestion.tips}</i></p>
          <p>Speak clearly and maintain eye contact with the camera.</p>
        `;
        
      } catch (error) {
        console.error('Error accessing media:', error);
        alert('Could not access camera/microphone. Please check permissions.');
      }
    }

    async function stopInterview() {
      // Stop recording
      mediaRecorder.stop();
      
      // Stop all media tracks
      document.getElementById('userVideo').srcObject.getTracks().forEach(track => track.stop());
      
      // Update UI
      document.getElementById('startInterviewBtn').style.display = 'inline-block';
      document.getElementById('stopInterviewBtn').style.display = 'none';
      
      const feedbackDiv = document.getElementById('interviewFeedback');
      feedbackDiv.innerHTML += `<p><i class="fas fa-spinner fa-spin"></i> Analyzing your interview...</p>`;
      
      // Simulate analysis after 3 seconds
      setTimeout(() => {
        const feedback = generateFeedback();
        feedbackDiv.innerHTML = `
          <h4>Interview Feedback</h4>
          <p><strong>Question:</strong> "${currentQuestion.text}"</p>
          
          <h5>Content Analysis:</h5>
          <p>${feedback.content}</p>
          
          <h5>Delivery Analysis:</h5>
          <p>${feedback.delivery}</p>
          
          <h5>Suggestions for Improvement:</h5>
          <ul>
            ${feedback.suggestions.map(s => `<li>${s}</li>`).join('')}
          </ul>
          
          <button class="btn" onclick="startInterview()">Practice Another Question</button>
        `;
      }, 3000);
    }

    function generateFeedback() {
      // In a real implementation, this would come from your AI backend
      return {
        content: "Your answer was relevant but could include more specific examples from your experience.",
        delivery: "You spoke clearly but could vary your tone more and smile occasionally.",
        suggestions: [
          "Structure your answer using the STAR method (Situation, Task, Action, Result)",
          "Include 1-2 specific achievements that relate to the question",
          "Maintain slightly more eye contact with the camera",
          "Practice pausing briefly between points"
        ]
      };
    }

    // Initialize on page load
    window.onload = function() {
      switchLanguage();
      
      // Set up event listeners
      document.getElementById('userInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') sendMessage();
      });
    };
  </script>
</body>
</html>